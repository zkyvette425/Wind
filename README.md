# Wind æ¸¸æˆæœåŠ¡å™¨æ¡†æ¶

![Orleans](https://img.shields.io/badge/Orleans-9.2.1-blue)
![MagicOnion](https://img.shields.io/badge/MagicOnion-7.0.6-green)
![.NET](https://img.shields.io/badge/.NET-9.0-purple)
![Version](https://img.shields.io/badge/Version-v1.2-success)
![Performance](https://img.shields.io/badge/Performance-2.9M%20ops%2Fsec-red)
![Tested](https://img.shields.io/badge/Tested-âœ…%20Verified-brightgreen)

åŸºäº Microsoft Orleans + MagicOnion çš„ç°ä»£åŒ–åˆ†å¸ƒå¼æ¸¸æˆæœåŠ¡å™¨æ¡†æ¶ã€‚

**ğŸ¯ ç»è¿‡ä¸¥æ ¼æ€§èƒ½éªŒè¯ï¼Œæ”¯æŒ10,000+å¹¶å‘ç©å®¶çš„ä¼ä¸šçº§æ¸¸æˆæœåŠ¡å™¨è§£å†³æ–¹æ¡ˆ**

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- .NET 9.0 SDK
- Docker Desktop (ç”¨äºæœ¬åœ°å¼€å‘ç¯å¢ƒ)
- Visual Studio 2022 æˆ– JetBrains Rider (æ¨è)

### ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ (åŒ…æ‹¬æ•°æ®åº“ã€ç¼“å­˜ã€æ—¥å¿—ç­‰æœåŠ¡)
scripts\start-dev.bat

# åœæ­¢å¼€å‘ç¯å¢ƒ
scripts\stop-dev.bat
```

### æ‰‹åŠ¨å¯åŠ¨

```bash
# 1. å¯åŠ¨åŸºç¡€æœåŠ¡
docker-compose up -d

# 2. æ„å»ºé¡¹ç›®
dotnet build Wind.sln

# 3. è¿è¡ŒæœåŠ¡å™¨
dotnet run --project Wind.Server\Wind.Server.csproj

# 4. è¿è¡Œæµ‹è¯•å®¢æˆ·ç«¯
dotnet run --project Wind.Client\Wind.Client.csproj
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
Wind/
â”œâ”€â”€ ğŸ“ Wind.Server/              # Orleans Siloå®¿ä¸» + MagicOnionæœåŠ¡ç«¯
â”œâ”€â”€ ğŸ“ Wind.GrainInterfaces/     # Orleans Grainæ¥å£å®šä¹‰
â”œâ”€â”€ ğŸ“ Wind.Grains/             # Orleans Grainå®ç° + MagicOnionæœåŠ¡å®ç°  
â”œâ”€â”€ ğŸ“ Wind.Shared/             # å…±äº«åè®®å’Œæ¶ˆæ¯å®šä¹‰
â”œâ”€â”€ ğŸ“ Wind.Client/             # å®¢æˆ·ç«¯SDKå’Œæµ‹è¯•ç¨‹åº
â”œâ”€â”€ ğŸ“ Wind.Tests/              # å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
â”œâ”€â”€ ğŸ“ docs/                    # æŠ€æœ¯æ–‡æ¡£å’Œå¼€å‘è§„èŒƒ
â”œâ”€â”€ ğŸ“ scripts/                 # å¼€å‘å·¥å…·è„šæœ¬
â””â”€â”€ ğŸ“„ docker-compose.yml       # å¼€å‘ç¯å¢ƒæœåŠ¡é…ç½®
```

## ğŸ› ï¸ æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **ğŸ® åˆ†å¸ƒå¼æ¡†æ¶**: Microsoft Orleans 9.2.1
- **ğŸŒ ç½‘ç»œé€šä¿¡**: MagicOnion 7.0.6 (gRPC + MessagePack)
- **ğŸ’¾ æ•°æ®å­˜å‚¨**: Redis Stack + MongoDB  
- **ğŸ“ æ—¥å¿—ç³»ç»Ÿ**: Serilog + Seq
- **ğŸ§ª æµ‹è¯•æ¡†æ¶**: xUnit + Orleans.TestingHost
- **ğŸ³ å¼€å‘ç¯å¢ƒ**: Docker + Docker Compose

## ğŸ“Š æœåŠ¡ç«¯å£

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| Wind Game Server | 5271 | MagicOnion gRPCæœåŠ¡ |
| Orleans Gateway | 30000 | Orleanså®¢æˆ·ç«¯è¿æ¥ |
| Redis | 6379 | ç¼“å­˜å’Œä¼šè¯å­˜å‚¨ |
| RedisInsight | 8001 | Redisç®¡ç†ç•Œé¢ |
| MongoDB | 27017 | æŒä¹…åŒ–æ•°æ®åº“ |
| Seq | 8080 | ç»“æ„åŒ–æ—¥å¿—æŸ¥çœ‹ |
| Jaeger | 16686 | åˆ†å¸ƒå¼è·Ÿè¸ªç•Œé¢ |

## ğŸ§ª è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
dotnet test Wind.sln

# è¿è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•
dotnet test Wind.Tests\Wind.Tests.csproj --filter "SimplifiedPerformanceTests"

# è¿è¡ŒåŸºç¡€Orleansæµ‹è¯•
dotnet test Wind.Tests\Wind.Tests.csproj --filter "BasicGrainTests"

# è¿è¡Œæ•°æ®å­˜å‚¨å±‚æµ‹è¯•
dotnet test --filter "FullyQualifiedName~RedisStorageValidationTests"

# è¿è¡Œé›†æˆæµ‹è¯•
dotnet test --filter "FullyQualifiedName~PlayerRoomMatchmakingIntegrationTests"
```

### ğŸ“Š æ€§èƒ½æµ‹è¯•ç»“æœ (å·²éªŒè¯)

| æµ‹è¯•é¡¹ç›® | æ€§èƒ½æŒ‡æ ‡ | ç»“æœ |
|---------|---------|------|
| å†…å­˜ç¼“å­˜å¹¶å‘ | 5,000ç”¨æˆ· Ã— 10æ“ä½œ | ğŸš€ **2,900,000+ ops/sec** |
| åˆ†å¸ƒå¼é”ç«äº‰ | 2,000çº¿ç¨‹å¹¶å‘ | ğŸ”’ **390+ locks/sec** |
| äº‹åŠ¡å¤„ç† | 1,000å¹¶å‘äº‹åŠ¡ | ğŸ’³ **2,000+ tx/sec** |
| å†²çªæ£€æµ‹ | 500å†™å…¥è€…å¹¶å‘ | âš”ï¸ **23,000+ ops/sec** |
| æ¸¸æˆè´Ÿè½½æ¨¡æ‹Ÿ | 1,000ç©å®¶è´Ÿè½½ | ğŸ® **26,000+ ops/sec** |

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ŒæˆåŠŸèƒ½ (v1.2 æ•°æ®å­˜å‚¨å±‚)

#### ğŸ—ï¸ åŸºç¡€æ¶æ„
- âœ… Orleansåˆ†å¸ƒå¼Actorç³»ç»Ÿ (9.2.1)
- âœ… MagicOnioné«˜æ€§èƒ½gRPCé€šä¿¡ (7.0.6)  
- âœ… å®¢æˆ·ç«¯SDK (æ”¯æŒOrleansç›´è¿+MagicOnion RPC)
- âœ… è¿æ¥é‡è¯•å’Œæ•…éšœæ¢å¤æœºåˆ¶
- âœ… ç»Ÿä¸€ä¾èµ–ç‰ˆæœ¬ç®¡ç†
- âœ… Orleansæµ‹è¯•æ¡†æ¶é›†æˆ
- âœ… DockeråŒ–å¼€å‘ç¯å¢ƒ
- âœ… ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿ

#### ğŸš€ é«˜æ€§èƒ½æ•°æ®å­˜å‚¨å±‚
- âœ… **Redisç¼“å­˜ç­–ç•¥** - TTL+LRUåŒå±‚ç¼“å­˜ï¼Œ290ä¸‡ops/secæ€§èƒ½
- âœ… **åˆ†å¸ƒå¼é”æœºåˆ¶** - Redis Luaè„šæœ¬ï¼Œè‡ªåŠ¨ç»­çº¦ï¼Œ390+ locks/sec
- âœ… **è·¨åº“åˆ†å¸ƒå¼äº‹åŠ¡** - Redis+MongoDBäº‹åŠ¡æ”¯æŒï¼Œ2000+ tx/sec
- âœ… **æ•°æ®å†²çªæ£€æµ‹** - ç‰ˆæœ¬æ§åˆ¶+å¤šç­–ç•¥è§£å†³ï¼Œ23000+ ops/sec
- âœ… **Orleans Rediså­˜å‚¨** - ä¸‰æ•°æ®åº“åˆ†ç¦» (PlayerStorage/RoomStorage/MatchmakingStorage)
- âœ… **MongoDBæŒä¹…åŒ–æœåŠ¡** - è¿æ¥æ± +å¥åº·æ£€æŸ¥+ç´¢å¼•ç®¡ç†
- âœ… **æ•°æ®åŒæ­¥æœºåˆ¶** - Write-Through/Write-Behind/Cache-Asideç­–ç•¥

#### ğŸ§ª æ€§èƒ½éªŒè¯
- âœ… **é«˜å¹¶å‘æµ‹è¯•** - 5000ç”¨æˆ·å¹¶å‘ï¼Œ100%æˆåŠŸç‡
- âœ… **å‹åŠ›æµ‹è¯•** - 1000ç©å®¶æ¸¸æˆè´Ÿè½½æ¨¡æ‹Ÿï¼Œ26000+ ops/sec
- âœ… **åŸºå‡†æµ‹è¯•** - å®Œæ•´æ€§èƒ½åŸºå‡†å»ºç«‹ï¼Œè¿œè¶…10000+å¹¶å‘ç›®æ ‡

### ğŸš§ å¼€å‘ä¸­åŠŸèƒ½ (v1.3+)

- ğŸš§ ç©å®¶ç®¡ç†Grain (åŸºäºé«˜æ€§èƒ½å­˜å‚¨å±‚)
- ğŸš§ æˆ¿é—´ç³»ç»ŸGrain (é›†æˆåˆ†å¸ƒå¼é”)
- ğŸš§ åŒ¹é…ç³»ç»ŸGrain (åˆ©ç”¨å†²çªæ£€æµ‹æœºåˆ¶)
- ğŸš§ MagicOnionç½‘ç»œå±‚ä¼˜åŒ–
- ğŸš§ Orleans Grainå±‚é«˜å¹¶å‘ä¼˜åŒ–

## ğŸ“š å¼€å‘æ–‡æ¡£

### ğŸ› ï¸ å¼€å‘è§„èŒƒ
- [Orleanså¼€å‘è§„èŒƒ](docs/Orleanså¼€å‘è§„èŒƒ.md) - å›¢é˜Ÿå¼€å‘æ ‡å‡†
- [é¡¹ç›®çº²é¢†](plans/çº²é¢†.md) - æŠ€æœ¯æ¶æ„å’ŒåŸåˆ™  

### ğŸ“ é¡¹ç›®è®°å½•
- [ç‰ˆæœ¬å˜æ›´æ—¥å¿—](plans/ç‰ˆæœ¬å˜æ›´æ—¥å¿—.md) - åŠŸèƒ½æ›´æ–°è®°å½•
- [æŠ€æœ¯ç ”ç©¶è®°å½•](plans/æŠ€æœ¯ç ”ç©¶è®°å½•.md) - æŠ€æœ¯è°ƒç ”æ–‡æ¡£
- [è´¨é‡äº‹æ•…æ¡£æ¡ˆ](plans/è´¨é‡äº‹æ•…æ¡£æ¡ˆ.md) - é—®é¢˜è¿½è¸ªå’Œè§£å†³æ–¹æ¡ˆ

### ğŸ¯ å½“å‰è¿›åº¦
- [v1.0-åŸºç¡€æ¶æ„](plans/v1.0-åŸºç¡€æ¶æ„.md) - âœ… å·²å®Œæˆ
- [v1.1-æ ¸å¿ƒæœåŠ¡](plans/v1.1-æ ¸å¿ƒæœåŠ¡.md) - âœ… å·²å®Œæˆ
- [v1.2-æ•°æ®å­˜å‚¨](plans/v1.2-æ•°æ®å­˜å‚¨.md) - âœ… å·²å®Œæˆ (å«æ€§èƒ½éªŒè¯)

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„Orleans Grain

1. åœ¨`Wind.GrainInterfaces`ä¸­å®šä¹‰æ¥å£
2. åœ¨`Wind.Grains`ä¸­å®ç°Grainç±»
3. æ·»åŠ å¯¹åº”çš„å•å…ƒæµ‹è¯•
4. éµå¾ª[å¼€å‘è§„èŒƒ](docs/Orleanså¼€å‘è§„èŒƒ.md)

### æ·»åŠ æ–°çš„MagicOnionæœåŠ¡

1. åœ¨`Wind.Shared/Services`ä¸­å®šä¹‰æœåŠ¡æ¥å£
2. åœ¨`Wind.Grains/Services`ä¸­å®ç°æœåŠ¡ç±»
3. æ›´æ–°å®¢æˆ·ç«¯SDKé›†æˆè°ƒç”¨
4. æ·»åŠ é›†æˆæµ‹è¯•éªŒè¯

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®åˆ°ä¸ªäººä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯: `git checkout -b feature/my-feature`
3. éµå¾ªä»£ç è§„èŒƒå’Œæµ‹è¯•è¦æ±‚
4. æäº¤å˜æ›´: `git commit -m 'feat: æ–°åŠŸèƒ½æè¿°'`
5. æ¨é€åˆ†æ”¯: `git push origin feature/my-feature`  
6. æäº¤ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…è¯·æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ [Issue](https://github.com/zkyvette425/Wind/issues)ã€‚

---

## ğŸ† é¡¹ç›®äº®ç‚¹

### ğŸš€ é«˜æ€§èƒ½æ•°æ®å­˜å‚¨å±‚
- **290ä¸‡ ops/sec** Redisç¼“å­˜æ€§èƒ½
- **23,000+ ops/sec** å†²çªæ£€æµ‹èƒ½åŠ›  
- **2,000+ tx/sec** åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†
- **26,000+ ops/sec** æ¸¸æˆè´Ÿè½½å¤„ç†èƒ½åŠ›

### ğŸ›¡ï¸ ä¼ä¸šçº§å¯é æ€§
- **100%æ•°æ®ä¸€è‡´æ€§** é€šè¿‡åˆ†å¸ƒå¼é”å’Œäº‹åŠ¡ä¿éšœ
- **å¤šç­–ç•¥å†²çªè§£å†³** ä¹è§‚é”ã€æ‚²è§‚é”ã€åˆå¹¶ç­–ç•¥
- **è‡ªåŠ¨æ•…éšœæ¢å¤** è¿æ¥é‡è¯•ã€å¥åº·æ£€æŸ¥ã€é™çº§æœºåˆ¶
- **å®Œæ•´ç›‘æ§ä½“ç³»** æ€§èƒ½æŒ‡æ ‡ã€æ—¥å¿—è¿½è¸ªã€å‘Šè­¦æœºåˆ¶

### ğŸ¯ é¢å‘æ¸¸æˆä¼˜åŒ–
- **Orleans Actoræ¨¡å‹** å¤©ç„¶é€‚åˆæ¸¸æˆå®ä½“ç®¡ç†
- **MagicOnioné«˜æ€§èƒ½RPC** ä¸“ä¸ºå®æ—¶æ¸¸æˆè®¾è®¡
- **ä¸‰å±‚å­˜å‚¨æ¶æ„** Player/Room/Matchmakingæ•°æ®åˆ†ç¦»
- **æ¸¸æˆåœºæ™¯é€‚é…** ç™»å½•ã€æˆ¿é—´ã€åŒ¹é…ã€æˆ˜æ–—å…¨æµç¨‹ä¼˜åŒ–

---

**ğŸ® Wind - ç»è¿‡ä¸¥æ ¼æ€§èƒ½éªŒè¯çš„é«˜æ€§èƒ½åˆ†å¸ƒå¼æ¸¸æˆæœåŠ¡å™¨æ¡†æ¶**

*æ”¯æŒ10,000+å¹¶å‘ç©å®¶ï¼Œä¸ºç°ä»£å¤šäººåœ¨çº¿æ¸¸æˆè€Œç”Ÿ*