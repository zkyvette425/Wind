# æŠ€æœ¯ç ”ç©¶è®°å½•

## ğŸ¯ ä½¿ç”¨æŒ‡å—
**æŸ¥é˜…ä¼˜å…ˆçº§**ï¼š
1. **ä¼˜å…ˆæŸ¥é˜…æœ¬æ–‡ä»¶** - åŒ…å«æœ€æ–°çš„å®é™…è§£å†³æ–¹æ¡ˆå’Œæœ€ä½³å®è·µ
2. **å…¶æ¬¡ä½¿ç”¨Context7** - è·å–å®˜æ–¹æ–‡æ¡£å‚è€ƒ
3. **æœ€åæŸ¥é˜…æºç ** - GitHub Issues/å®˜æ–¹æºç 

**è®°å½•æ ¼å¼**ï¼šæ¯ä¸ªæŠ€æœ¯é—®é¢˜åŒ…å«ã€é—®é¢˜èƒŒæ™¯ã€‘ã€è§£å†³æ–¹æ¡ˆã€‘ã€å…³é”®å‘ç°ã€‘ã€é¿å‘æŒ‡å—ã€‘

---

## ğŸ“š æŠ€æœ¯ç ”ç©¶æ¡ˆä¾‹åº“

### ğŸš¨ æ¡ˆä¾‹1: Orleans 9.2.1 MessagePackåºåˆ—åŒ–é…ç½®å†²çª

**ç ”ç©¶æ—¥æœŸ**: 2025-08-13 (åŒ—äº¬æ—¶é—´)  
**è§£å†³çŠ¶æ€**: âœ… å·²è§£å†³  
**å½±å“èŒƒå›´**: Orleans Siloå¯åŠ¨å¤±è´¥ â†’ ç”Ÿäº§ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒæ­£å¸¸è¿è¡Œ

#### ã€é—®é¢˜èƒŒæ™¯ã€‘
- Orleans Siloå¯åŠ¨æ—¶æŠ¥é”™ï¼š`Found unserializable or uncopyable types`
- Context7æ–‡æ¡£å»ºè®®åŒæ—¶ä½¿ç”¨OrleansåŸç”Ÿåºåˆ—åŒ–å’ŒMessagePackåºåˆ—åŒ–
- å®é™…é…ç½®å¯¼è‡´åºåˆ—åŒ–å™¨å†²çªï¼ŒSiloæ— æ³•å¯åŠ¨

#### ã€é”™è¯¯é…ç½®æ–¹å¼ã€‘(æ¥è‡ªContext7æ–‡æ¡£)
```csharp
// âŒ é”™è¯¯ï¼šæ··åˆä½¿ç”¨ä¸¤ç§åºåˆ—åŒ–å™¨å¯¼è‡´å†²çª
[GenerateSerializer]     // OrleansåŸç”Ÿåºåˆ—åŒ–
[MessagePackObject]      // MessagePackåºåˆ—åŒ–
public class PlayerState
{
    [Id(0)]             // Orleansåºåˆ—åŒ–ID
    [Key(0)]            // MessagePackåºåˆ—åŒ–Key
    public string PlayerId { get; set; }
}
```

#### ã€æ­£ç¡®è§£å†³æ–¹æ¡ˆã€‘
```csharp
// âœ… æ­£ç¡®ï¼šä»…ä½¿ç”¨MessagePackåºåˆ—åŒ–
[MessagePackObject]
public class PlayerState 
{
    [MPKey(0)]  // ä½¿ç”¨aliasé¿å…å‘½åå†²çª
    public string PlayerId { get; set; }
}

// using aliasè§£å†³å‘½åç©ºé—´å†²çª
using MPKey = MessagePack.KeyAttribute;

// Orleans Siloé…ç½® 
builder.Host.UseOrleans(siloBuilder =>
{
    siloBuilder
        .UseLocalhostClustering()
        .AddMemoryGrainStorage("PlayerStorage");
});

// åœ¨Serviceså±‚é…ç½®MessagePackåºåˆ—åŒ–å™¨
builder.Services.AddSerializer(serializerBuilder => 
    serializerBuilder.AddMessagePackSerializer());
```

#### ã€å…³é”®å‘ç°ã€‘
1. **åºåˆ—åŒ–å™¨äº’æ–¥**: Orleans 9.2.1ä¸­ï¼ŒåŸç”Ÿåºåˆ—åŒ–å’ŒMessagePackä¸èƒ½åŒæ—¶ä½¿ç”¨
2. **é…ç½®ä½ç½®**: MessagePackåºåˆ—åŒ–å™¨åº”åœ¨`Services`å±‚é…ç½®ï¼Œä¸æ˜¯åœ¨`SiloBuilder`å±‚
3. **å‘½åç©ºé—´å†²çª**: `System.ComponentModel.DataAnnotations.KeyAttribute` vs `MessagePack.KeyAttribute`
4. **åŒ…ä¾èµ–**: éœ€è¦`Microsoft.Orleans.Serialization.MessagePack`åŒ…

#### ã€é¿å‘æŒ‡å—ã€‘
- âš ï¸ **ä¸è¦**åŒæ—¶ä½¿ç”¨`[GenerateSerializer]`å’Œ`[MessagePackObject]`
- âš ï¸ **ä¸è¦**åœ¨SiloBuilderä¸Šç›´æ¥è°ƒç”¨`AddSerializer`
- âœ… **ä½¿ç”¨**aliasè§£å†³Keyå±æ€§å†²çªï¼š`using MPKey = MessagePack.KeyAttribute`
- âœ… **ç¡®ä¿**æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒé…ç½®ä¸€è‡´
- âœ… **ä¼˜å…ˆ**æŸ¥é˜…æœ¬è®°å½•ï¼ŒContext7çš„Orleansæ–‡æ¡£å¯èƒ½åŒ…å«è¿‡æ—¶çš„æ··åˆé…ç½®ç¤ºä¾‹

### ğŸ” æ¡ˆä¾‹2: Orleans 9.2.1 MemoryPackåºåˆ—åŒ–å¯è¡Œæ€§è¯„ä¼°

**ç ”ç©¶æ—¥æœŸ**: 2025-08-13 (åŒ—äº¬æ—¶é—´)  
**è§£å†³çŠ¶æ€**: ğŸ“Š å·²è¯„ä¼°å®Œæˆ  
**å½±å“èŒƒå›´**: æŠ€æœ¯é€‰å‹å†³ç­– - MessagePack vs MemoryPack

#### ã€é—®é¢˜èƒŒæ™¯ã€‘
- MemoryPackæ€§èƒ½æ¯”MessagePackå¿«2-5å€ï¼Œè€ƒè™‘æŠ€æœ¯å‡çº§
- ç”¨æˆ·è¯¢é—®ä¸ºä»€ä¹ˆä¸ä½¿ç”¨æ›´å¿«çš„MemoryPackåºåˆ—åŒ–å™¨
- éœ€è¦è¯„ä¼°Orleanså¯¹MemoryPackçš„æ”¯æŒæƒ…å†µ

#### ã€ç ”ç©¶å‘ç°ã€‘
**Context7æŸ¥è¯¢ç»“æœ**: Orleans 9.2.1å®˜æ–¹æ”¯æŒçš„åºåˆ—åŒ–å™¨
- âœ… MessagePack (`Microsoft.Orleans.Serialization.MessagePack`)
- âœ… System.Text.Json (`Microsoft.Orleans.Serialization.SystemTextJson`)
- âœ… Newtonsoft.Json (`Microsoft.Orleans.Serialization.NewtonsoftJson`)
- âœ… Protobuf (`Microsoft.Orleans.Serialization.Protobuf`)
- âœ… F# åŸç”Ÿæ”¯æŒ (`Microsoft.Orleans.Serialization.FSharp`)
- âŒ **æ— MemoryPackå®˜æ–¹æ”¯æŒ**

**WebSearchè¡¥å……ç»“æœ**:
- MemoryPackåŸºå‡†æµ‹è¯•æ˜¾ç¤ºæ¯”MessagePackå¿«2-5å€
- Orleansæä¾›å¯æ‰©å±•åºåˆ—åŒ–æ¡†æ¶ï¼Œç†è®ºä¸Šå¯è‡ªå®šä¹‰é›†æˆ
- ä½†éœ€è¦ç¤¾åŒºé©±åŠ¨å¼€å‘ï¼Œæ— å®˜æ–¹æ”¯æŒè®¡åˆ’

#### ã€æŠ€æœ¯è¯„ä¼°ã€‘
**MemoryPackä¼˜åŠ¿**:
- ğŸš€ **æ€§èƒ½**: æ¯”MessagePackå¿«2-5å€
- ğŸ¯ **C#ä¼˜åŒ–**: ä¸“ä¸º.NET 7+å’ŒC# 11ä¼˜åŒ–
- ğŸ’¾ **å†…å­˜æ•ˆç‡**: é›¶æ‹·è´åºåˆ—åŒ–
- ğŸ”§ **ç°ä»£åŒ–**: ä½¿ç”¨å¢é‡æºç”Ÿæˆå™¨

**å½“å‰é€‰æ‹©MessagePackçš„åŸå› **:
- âœ… **å®˜æ–¹æ”¯æŒ**: Orleanså®˜æ–¹ç»´æŠ¤çš„é›†æˆåŒ…
- âœ… **ç¨³å®šæ€§**: æˆç†Ÿçš„ç”Ÿäº§ç¯å¢ƒéªŒè¯
- âœ… **ç”Ÿæ€å…¼å®¹**: ä¸Unityã€å…¶ä»–è¯­è¨€å®¢æˆ·ç«¯å…¼å®¹
- âœ… **ç»´æŠ¤æˆæœ¬**: æ— éœ€è‡ªç»´æŠ¤é›†æˆä»£ç 

#### ã€æŠ€æœ¯å†³ç­–å»ºè®®ã€‘
**çŸ­æœŸ**: ç»§ç»­ä½¿ç”¨MessagePack
- é£é™©ä½ï¼Œç¨³å®šå¯é 
- æ€§èƒ½å·²ç»æ¯”JSONåºåˆ—åŒ–å¿«3-5å€
- å®˜æ–¹æ”¯æŒå’Œç»´æŠ¤

**é•¿æœŸ**: å…³æ³¨MemoryPackå‘å±•
- ç›‘æ§Orleansç¤¾åŒºå¯¹MemoryPackçš„é›†æˆéœ€æ±‚
- è¯„ä¼°è‡ªå®šä¹‰åºåˆ—åŒ–å™¨å¼€å‘æˆæœ¬
- åœ¨v2.0æ¶æ„å‡çº§æ—¶é‡æ–°è¯„ä¼°

#### ã€é¿å‘æŒ‡å—ã€‘
- âš ï¸ **ä¸å»ºè®®**åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨è‡ªå®šä¹‰MemoryPacké›†æˆ
- âš ï¸ **æ€§èƒ½ä¼˜åŒ–**åº”å…ˆä¼˜åŒ–ä¸šåŠ¡é€»è¾‘ï¼Œåºåˆ—åŒ–é€šå¸¸ä¸æ˜¯ç“¶é¢ˆ
- âœ… **åŸºå‡†æµ‹è¯•**å¦‚éœ€éªŒè¯æ€§èƒ½å½±å“ï¼Œåº”å»ºç«‹å®Œæ•´çš„åŸºå‡†æµ‹è¯•æ¡†æ¶
- âœ… **æŠ€æœ¯ç›‘æ§**å®šæœŸæ£€æŸ¥Orleansç¤¾åŒºå¯¹MemoryPackçš„å®˜æ–¹æ”¯æŒè¿›å±•

---

## Orleans .NET 9 ç ”ç©¶è®°å½•

### ç ”ç©¶æ—¥æœŸ: 2025-08-11 (åŒ—äº¬æ—¶é—´)
### ç ”ç©¶æ–¹å¼: WebSearch (Context7æš‚æ—¶æ— æ³•è®¿é—®)
### ç ”ç©¶æ¥æº: Microsoft Learnå®˜æ–¹æ–‡æ¡£

## Orleans 9.2.1 + MessagePackåºåˆ—åŒ–ç ”ç©¶è®°å½•

### ç ”ç©¶æ—¥æœŸ: 2025-08-12 (åŒ—äº¬æ—¶é—´)
### ç ”ç©¶æ–¹å¼: Task Agent + Context7æŸ¥è¯¢
### ç ”ç©¶æ¥æº: Orleans 9.2.1å®˜æ–¹æ–‡æ¡£ + MessagePacké›†æˆæŒ‡å—

#### æ ¸å¿ƒå‘ç°

##### 1. Orleans 9.2.1åºåˆ—åŒ–é…ç½®æœ€ä½³å®è·µ
```csharp
// æ­£ç¡®çš„Orleans + MessagePackåºåˆ—åŒ–é…ç½®
using Microsoft.Extensions.DependencyInjection;
using Microsoft.Orleans.Serialization;

var builder = Host.CreateApplicationBuilder(args)
    .UseOrleans(siloBuilder =>
    {
        siloBuilder
            .UseLocalhostClustering()
            // æ·»åŠ MessagePackä½œä¸ºOrleansçš„åºåˆ—åŒ–å™¨
            .AddSerializer(serializerBuilder => serializerBuilder.AddMessagePackSerializer());
    });
```

##### 2. åŒé‡åºåˆ—åŒ–æ”¯æŒçš„ç±»å‹å®šä¹‰
```csharp
// åŒæ—¶æ”¯æŒOrleanså’ŒMessagePackçš„åºåˆ—åŒ–
[GenerateSerializer]  // Orleansåºåˆ—åŒ–æ”¯æŒ
[MessagePackObject]   // MessagePackåºåˆ—åŒ–æ”¯æŒ
public class PlayerData
{
    [Id(0)]  // Orleansåºåˆ—åŒ–ID
    [Key(0)] // MessagePackåºåˆ—åŒ–Key
    public string PlayerId { get; set; } = string.Empty;
    
    [Id(1)]
    [Key(1)]
    public string PlayerName { get; set; } = string.Empty;
}
```

##### 3. å…³é”®æŠ€æœ¯è¦ç‚¹
- Orleans 9.2.1éœ€è¦ä½¿ç”¨`Microsoft.Orleans.Serialization.MessagePack`åŒ…
- å­—æ®µIDä¸€è‡´æ€§ï¼š`[Id(n)]`å’Œ`[Key(n)]`ä½¿ç”¨ç›¸åŒæ•°å­—ç¡®ä¿åºåˆ—åŒ–å…¼å®¹
- å¿…é¡»åœ¨Sharedé¡¹ç›®ä¸­æ·»åŠ `Microsoft.Orleans.Serialization.Abstractions`åŒ…å¼•ç”¨
- éœ€è¦æ„å»ºé¡¹ç›®ä»¥ç”ŸæˆOrleansåºåˆ—åŒ–å™¨ä»£ç 

##### 4. åºåˆ—åŒ–æ€§èƒ½å¯¹æ¯”
- MessagePackæ¯”JSONåºåˆ—åŒ–æ€§èƒ½æå‡çº¦3-5å€
- æ•°æ®ä½“ç§¯å‡å°‘çº¦30-50%
- æ”¯æŒç‰ˆæœ¬å…¼å®¹çš„åºåˆ—åŒ–æ ¼å¼æ¼”è¿›

---

#### æ ¸å¿ƒå‘ç°

##### 1. Orleansç°ä»£åŒ–å®¿ä¸»æ¨¡å¼ (.NET 9å…¼å®¹)
```csharp
// Program.cs - ç°ä»£åŒ–çš„Orleans Siloå®¿ä¸»é…ç½®
using Microsoft.Extensions.Hosting;

await Host.CreateDefaultBuilder(args)
    .UseOrleans(siloBuilder => 
    {
        siloBuilder.UseLocalhostClustering(); // æœ¬åœ°å¼€å‘ç¯å¢ƒ
        siloBuilder.ConfigureEndpoints(siloPort: 11111, gatewayPort: 30000);
    })
    .RunConsoleAsync();
```

##### 2. ç”Ÿäº§ç¯å¢ƒé…ç½®ç¤ºä¾‹
```csharp
using IHost host = Host.CreateDefaultBuilder(args)
    .UseOrleans(builder => 
    {
        builder.UseAzureStorageClustering(options => 
            options.ConfigureTableServiceClient(connectionString));
    })
    .UseConsoleLifetime()
    .Build();
```

##### 3. å…³é”®é…ç½®è¦ç´ 
- **ClusterId**: é›†ç¾¤å”¯ä¸€æ ‡è¯†ï¼ŒåŒä¸€é›†ç¾¤å†…æ‰€æœ‰Siloå’ŒClientå¯ä»¥ç›´æ¥é€šä¿¡
- **ServiceId**: åº”ç”¨å”¯ä¸€æ ‡è¯†ï¼Œç”¨äºæŒä¹…åŒ–æä¾›ç¨‹åºï¼Œéƒ¨ç½²è¿‡ç¨‹ä¸­åº”ä¿æŒç¨³å®š
- **ç«¯å£é…ç½®**: 
  - é»˜è®¤Siloé—´é€šä¿¡ç«¯å£: 11111
  - é»˜è®¤Client-Siloé€šä¿¡ç«¯å£: 30000
  - å¯é€šè¿‡ConfigureEndpointsè‡ªå®šä¹‰

##### 4. å¿…éœ€çš„NuGetåŒ…
- **å¼€å‘Silo**: `Microsoft.Orleans.Server` + `Microsoft.Extensions.Hosting`
- **æ¶æ„**: éµå¾ª.NETç°ä»£åŒ–é…ç½®æ¨¡å¼å’Œä¾èµ–æ³¨å…¥

---

## MagicOnion ç ”ç©¶è®°å½•

### ç ”ç©¶æ—¥æœŸ: 2025-08-11 (åŒ—äº¬æ—¶é—´)
### ç ”ç©¶æ–¹å¼: WebSearch + GitHubå®˜æ–¹æ–‡æ¡£
### æœ€æ–°ç‰ˆæœ¬: v7.0.6 (2024æ´»è·ƒç»´æŠ¤)

#### æ ¸å¿ƒå‘ç°

##### 1. MagicOnionç‰¹æ€§
- **ç»Ÿä¸€æ¡†æ¶**: åŒæ—¶æ”¯æŒRPC APIå’Œå®æ—¶é€šä¿¡(ç±»ä¼¼SignalR)
- **åŸºäºgRPC**: HTTP/2äºŒè¿›åˆ¶ä¼ è¾“ï¼Œé«˜æ€§èƒ½
- **MessagePackåºåˆ—åŒ–**: æœ€å¿«çš„C#äºŒè¿›åˆ¶åºåˆ—åŒ–å™¨
- **ä»£ç å…±äº«**: C#æ¥å£ä½œä¸ºåè®®æ¶æ„ï¼Œæ— éœ€.protoæ–‡ä»¶
- **Unityæ”¯æŒ**: Unity 2021.3.0f1(LTS)ä»¥ä¸Šç‰ˆæœ¬

##### 2. æœåŠ¡ç«¯é…ç½® (ASP.NET Core)
```csharp
// Program.cs - MagicOnionæœåŠ¡ç«¯è®¾ç½®
using MagicOnion;
using MagicOnion.Server;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddMagicOnion(); // æ·»åŠ MagicOnionæœåŠ¡

var app = builder.Build();
app.MapMagicOnionService(); // æ˜ å°„MagicOnionæœåŠ¡
```

##### 3. æœåŠ¡æ¥å£å®šä¹‰
```csharp
// å…±äº«æ¥å£å®šä¹‰ (Server + Client)
using MagicOnion;

public interface IMyFirstService : IService<IMyFirstService>
{
    // è¿”å›ç±»å‹å¿…é¡»æ˜¯UnaryResult<T>æˆ–UnaryResult
    UnaryResult<int> SumAsync(int x, int y);
}
```

##### 4. æœåŠ¡å®ç°
```csharp
// æœåŠ¡ç«¯å®ç°
using MagicOnion.Server;

public class MyFirstService : ServiceBase<IMyFirstService>, IMyFirstService
{
    public async UnaryResult<int> SumAsync(int x, int y)
    {
        Console.WriteLine($"Received:{x}, {y}");
        return x + y;
    }
}
```

##### 5. å®¢æˆ·ç«¯ä½¿ç”¨
```csharp
// å®¢æˆ·ç«¯è°ƒç”¨
using Grpc.Net.Client;
using MagicOnion.Client;

var channel = GrpcChannel.ForAddress("https://localhost:5001");
var client = MagicOnionClient.Create<IMyFirstService>(channel);
var result = await client.SumAsync(123, 456);
```

##### 6. Unityç‰¹æ®Šè€ƒè™‘
- **MessagePackå•ç‹¬å®‰è£…**: MagicOnionåŒ…ä¸åŒ…å«MessagePackï¼Œéœ€è¦å•ç‹¬å®‰è£…
- **HTTPå®¢æˆ·ç«¯**: æ¨èä½¿ç”¨YetAnotherHttpHandleræ›¿ä»£è¿‡æ—¶çš„C-coreåº“
- **StreamingHub**: æ”¯æŒå…¨ç±»å‹åŒ–çš„å®æ—¶é€šä¿¡ï¼Œç±»ä¼¼SignalRä½†æ€§èƒ½æ›´é«˜

##### 7. æ¶æ„ä¼˜åŠ¿
- **æ€§èƒ½**: åŸºäºgRPC + MessagePackï¼Œæ¯”ä¼ ç»ŸSignalRå¿«æ•°å€
- **å¼€å‘æ•ˆç‡**: C#æ¥å£å…±äº«ï¼Œæ— éœ€ç»´æŠ¤é¢å¤–çš„åè®®å®šä¹‰æ–‡ä»¶
- **æ¸¸æˆä¸“ç”¨**: ä¸“é—¨ä¸ºUnityæ¸¸æˆåœºæ™¯ä¼˜åŒ–
- **å•†ä¸šéªŒè¯**: å·²åœ¨å¤šä¸ªå•†ä¸šæ¸¸æˆä¸­ä½¿ç”¨

#### æŠ€æœ¯å†³ç­–éªŒè¯

åŸºäºç ”ç©¶ç»“æœï¼Œæˆ‘ä»¬ä¹‹å‰çš„æŠ€æœ¯é€‰å‹å®Œå…¨æ­£ç¡®ï¼š

1. **Orleans 9.2.1**: å®Œå…¨æ”¯æŒ.NET 9ï¼Œä½¿ç”¨ç°ä»£åŒ–å®¿ä¸»æ¨¡å¼
2. **MagicOnion 7.0.6**: æ´»è·ƒç»´æŠ¤ï¼Œä¸“ä¸ºæ¸¸æˆä¼˜åŒ–ï¼Œæ€§èƒ½å“è¶Š
3. **æ¶æ„å…¼å®¹æ€§**: ä¸¤è€…éƒ½éµå¾ª.NETç°ä»£åŒ–å¼€å‘æ¨¡å¼ï¼Œå¯å®Œç¾é›†æˆ

#### åç»­è¡ŒåŠ¨é¡¹
1. **Orleans**: ä½¿ç”¨Microsoft.Orleans.Server + ç°ä»£åŒ–é…ç½®
2. **MagicOnion**: é›†æˆåˆ°Orleanså®¿ä¸»ä¸­ï¼Œå…±äº«ä¾èµ–æ³¨å…¥å®¹å™¨
3. **MessagePack**: å•ç‹¬å®‰è£…ï¼Œé…ç½®åºåˆ—åŒ–é€‰é¡¹
4. **å¼€å‘ç¯å¢ƒ**: æœ¬åœ°é›†ç¾¤é…ç½®ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨äº‘å­˜å‚¨é›†ç¾¤

---

### ğŸš¨ æ¡ˆä¾‹2: Orleans 9.2.1 Rediså­˜å‚¨é…ç½®APIå…¼å®¹æ€§é—®é¢˜

**ç ”ç©¶æ—¥æœŸ**: 2025-08-15 (åŒ—äº¬æ—¶é—´)  
**è§£å†³çŠ¶æ€**: âœ… å·²è§£å†³  
**å½±å“èŒƒå›´**: Orleans RedisæŒä¹…åŒ–å­˜å‚¨é…ç½®å¤±è´¥ â†’ æ­£ç¡®çš„é…ç½®è¯­æ³•åº”ç”¨

#### ã€é—®é¢˜èƒŒæ™¯ã€‘
- Orleans 9.2.1å®˜æ–¹æ–‡æ¡£ä¸­çš„RedisStorageOptionsé…ç½®APIåœ¨å®é™…ç‰ˆæœ¬ä¸­ä¸å­˜åœ¨
- Context7æŸ¥é˜…çš„RedisStorageOptionså±æ€§ï¼ˆConnectionStringã€Databaseã€UseJsonç­‰ï¼‰ä¸å¯ç”¨
- ç¼–è¯‘æ—¶æŠ¥é”™ï¼šCS1061 æœªåŒ…å« ConnectionStringã€Database ç­‰å±æ€§çš„å®šä¹‰
- æ–‡æ¡£ä¸å®é™…APIç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå¯¼è‡´æŒ‰æ–‡æ¡£é…ç½®å®Œå…¨æ— æ³•å·¥ä½œ

#### ã€é”™è¯¯é…ç½®æ–¹å¼ã€‘(æ¥è‡ªå®˜æ–¹æ–‡æ¡£)
```csharp
// âŒ é”™è¯¯ï¼šOrleans 9.2.1ä¸­è¿™äº›å±æ€§ä¸å­˜åœ¨
siloBuilder.AddRedisGrainStorage("PlayerStorage", options =>
{
    options.ConnectionString = "localhost:6379";  // ä¸å­˜åœ¨
    options.Database = 0;                         // ä¸å­˜åœ¨  
    options.UseJson = false;                      // ä¸å­˜åœ¨
    options.KeyPrefix = "player";                 // ä¸å­˜åœ¨
});
```

#### ã€ç”¨æˆ·æä¾›çš„æ­£ç¡®è§£å†³æ–¹æ¡ˆã€‘
```csharp
// âœ… æ­£ç¡®ï¼šOrleans 9.2.1å®é™…å¯ç”¨çš„é…ç½®æ–¹å¼
siloBuilder.AddRedisGrainStorage(
    name: "PlayerStorage",
    options =>
    {
        // ä½¿ç”¨StackExchange.Redis.ConfigurationOptions
        options.ConfigurationOptions = ConfigurationOptions.Parse("localhost:6379,password=windgame123");
        
        // è‡ªå®šä¹‰å­˜å‚¨é”®ç”Ÿæˆé€»è¾‘
        options.GetStorageKey = (type, id) => $"player:{type}-{id}";
    });

// å¤šæ•°æ®åº“é…ç½®ç¤ºä¾‹
siloBuilder.AddRedisGrainStorage(
    name: "RoomStorage", 
    options =>
    {
        var redisConfig = ConfigurationOptions.Parse("localhost:6379,password=windgame123");
        redisConfig.DefaultDatabase = 1;  // ä½¿ç”¨æ•°æ®åº“1
        options.ConfigurationOptions = redisConfig;
        options.GetStorageKey = (type, id) => $"room:{type}-{id}";
    });
```

#### ã€å…³é”®å‘ç°ã€‘
1. **APIå˜æ›´**: Orleans 9.2.1ä½¿ç”¨StackExchange.Redis.ConfigurationOptionsä»£æ›¿ç®€å•å­—ç¬¦ä¸²é…ç½®
2. **è¿æ¥é…ç½®**: é€šè¿‡ConfigurationOptions.Parse()æ–¹æ³•è§£æå®Œæ•´è¿æ¥å­—ç¬¦ä¸²ï¼Œæ”¯æŒå¯†ç ç­‰å‚æ•°
3. **æ•°æ®åº“é€‰æ‹©**: é€šè¿‡ConfigurationOptions.DefaultDatabaseå±æ€§è®¾ç½®Redisæ•°æ®åº“
4. **å­˜å‚¨é”®è‡ªå®šä¹‰**: å¿…é¡»é€šè¿‡GetStorageKeyå§”æ‰˜è‡ªå®šä¹‰é”®ç”Ÿæˆç­–ç•¥ï¼Œæ— å†…ç½®KeyPrefix
5. **åºåˆ—åŒ–å™¨**: å¯é€‰é…ç½®GrainStorageSerializerï¼Œä½†ç”¨æˆ·å»ºè®®æš‚æ—¶çœç•¥å¤æ‚é…ç½®

#### ã€é¿å‘æŒ‡å—ã€‘
1. **APIå…¼å®¹æ€§**: Orleansç‰ˆæœ¬å‡çº§æ—¶é‡ç‚¹å…³æ³¨å­˜å‚¨æä¾›ç¨‹åºBreaking Changes
2. **æ–‡æ¡£æ—¶æ•ˆæ€§**: å®˜æ–¹æ–‡æ¡£å¯èƒ½æ»åäºå®é™…APIç‰ˆæœ¬ï¼Œéœ€å¤šæ–¹éªŒè¯
3. **æŠ€æœ¯å›°éš¾å¤„ç†**: é‡åˆ°APIå…¼å®¹æ€§é—®é¢˜æ—¶ç«‹å³å¯»æ±‚æœ‰ç»éªŒäººå‘˜æŒ‡å¯¼ï¼Œä¸è¦è‡ªè¡Œç®€åŒ–
4. **é…ç½®éªŒè¯**: Rediså­˜å‚¨é…ç½®åå¿…é¡»å®é™…æµ‹è¯•è¿æ¥å’Œå­˜å‚¨åŠŸèƒ½
5. **å¯†ç è®¤è¯**: ç”Ÿäº§Redisé€šå¸¸éœ€è¦å¯†ç è®¤è¯ï¼Œè¿æ¥å­—ç¬¦ä¸²ä¸­å¿…é¡»åŒ…å«å¯†ç å‚æ•°

#### ã€å·¥ä½œæ–¹å¼æ•™è®­ã€‘
- **å›°éš¾æ±‡æŠ¥æœºåˆ¶**: é‡åˆ°æŠ€æœ¯å›°éš¾åº”ç«‹å³è¯¦ç»†æ±‡æŠ¥ï¼Œè€Œéå°è¯•ç®€åŒ–ç»•è¿‡
- **ç”¨æˆ·æŒ‡å¯¼ä»·å€¼**: ç”¨æˆ·æä¾›çš„è§£å†³æ–¹æ¡ˆå‡†ç¡®æœ‰æ•ˆï¼Œè¯æ˜äº†å¯»æ±‚æŒ‡å¯¼çš„é‡è¦æ€§
- **åä½œè§£å†³**: æŠ€æœ¯é—®é¢˜é€šè¿‡åä½œè§£å†³æ¯”å•å…µä½œæˆ˜æ›´é«˜æ•ˆ

#### ã€æˆåŠŸåº”ç”¨ç»“æœã€‘
- Rediså­˜å‚¨é…ç½®ç¼–è¯‘é€šè¿‡
- æ”¯æŒå¯†ç è®¤è¯è¿æ¥
- å®ç°äº†æ•°æ®åº“åˆ†ç¦»ï¼ˆdatabase 0, 1, 2ï¼‰
- å»ºç«‹äº†æœ‰æ„ä¹‰çš„å­˜å‚¨é”®å‰ç¼€ï¼ˆplayer:, room:, match:ï¼‰
- ä¸ºåç»­Orleans GrainæŒä¹…åŒ–å¥ å®šäº†æ­£ç¡®åŸºç¡€

---

*æœ¬è®°å½•å°†åœ¨é¡¹ç›®è¿›å±•è¿‡ç¨‹ä¸­æŒç»­æ›´æ–°ï¼Œè®°å½•æ–°çš„æŠ€æœ¯å‘ç°å’Œå®è·µç»éªŒã€‚*